<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Napolitan Relay — Play</title>
  <link rel="stylesheet" href="/styles/app.css" />
</head>
<body class="page play">

  <header class="topbar">
    <div class="brand">
      <div class="chip">RELAY</div>
      <div class="chip muted" id="phaseChip">LOBBY</div>
    </div>
    <nav class="tabs">
      <button class="tab active" data-tab="lobby">LOBBY</button>
      <button class="tab" data-tab="wills">WILLS</button>
      <button class="tab" data-tab="death">DEATH</button>
      <button class="tab" data-tab="rank">RANK</button>
    </nav>
    <div class="right">
      <button id="btnLogout" class="btn">LOGOUT</button>
    </div>
  </header>

  <main class="main">
    <!-- LOBBY 탭 -->
    <section id="tab-lobby" class="tabPane active">
      <!-- 대기열 정보 -->
      <div class="lobbyCard">
        <div class="queueInfo">
          <div class="queueItem">
            <div class="num" id="queueTotal">12</div>
            <div class="lbl">총 대기</div>
          </div>
          <div class="queueItem">
            <div class="num" id="queuePosition">3</div>
            <div class="lbl">내 순번</div>
          </div>
          <div class="queueItem">
            <div class="num" id="queuePlaying">1</div>
            <div class="lbl">플레이 중</div>
          </div>
        </div>
        <div class="row">
          <button id="btnStartRun" class="btn primary">START</button>
          <button id="btnMiniFromLobby" class="btn">MINI GAME</button>
        </div>
      </div>

      <!-- 게임 화면 (마지막 이미지 스타일) -->
      <div class="roomCard" id="roomCard">
        <!-- 스탯 바 -->
        <div class="statBar">
          <div class="statItem">
            <div class="icon">❤️</div>
            <div class="label">HP</div>
            <div class="value" id="statHp">100</div>
          </div>
          <div class="statItem">
            <div class="icon">🧠</div>
            <div class="label">SANITY</div>
            <div class="value" id="statSanity">100</div>
          </div>
          <div class="statItem">
            <div class="icon">📊</div>
            <div class="label">PROGRESS</div>
            <div class="value" id="statProgress">0%</div>
          </div>
        </div>

        <!-- 씬 이미지 (상단) -->
        <img id="sceneImage" class="sceneImage" src="" alt="scene" />

        <!-- 텍스트 + 선택지 (하단) -->
        <div class="storyContent">
          <div class="storyText" id="storyText">START 버튼을 눌러 게임을 시작하세요.</div>
          <div class="choices" id="choices"></div>
        </div>
      </div>
    </section>

    <!-- WILLS 탭 -->
    <section id="tab-wills" class="tabPane">
      <div class="feedCard">
        <div class="feedHeader">
          <div class="feedTitle">WILLS FEED</div>
          <div class="chip muted" id="willCount">0</div>
        </div>
        <div class="feedList" id="willList">
          <div class="emptyState">아직 유언이 없습니다</div>
        </div>
      </div>
    </section>

    <!-- DEATH 탭 -->
    <section id="tab-death" class="tabPane">
      <div class="feedCard">
        <div class="feedHeader">
          <div class="feedTitle">DEATH FEED</div>
          <div class="chip muted" id="deathCount">0</div>
        </div>
        <div class="feedList" id="deathList">
          <div class="emptyState">아직 사망 기록이 없습니다</div>
        </div>
      </div>
    </section>

    <!-- RANK 탭 -->
    <section id="tab-rank" class="tabPane">
      <div class="feedCard">
        <div class="feedHeader">
          <div class="feedTitle">RANKING</div>
        </div>
        <div class="feedList" id="rankList">
          <div class="emptyState">랭킹 데이터가 없습니다</div>
        </div>
      </div>
    </section>
  </main>

  <!-- 사망 모달 (유언 직접 입력) -->
  <div id="deathModal" class="modal hidden">
    <div class="modalInner">
      <div class="modalHeader">
        <div class="modalTitle">💀 DEATH REPORT</div>
      </div>
      
      <!-- 사망 카드 - 이미지 위 텍스트 -->
      <div class="deathCardWrap">
        <img id="deathBgImg" class="bgImg" src="" alt="death" />
        <div class="overlay">
          <div class="deathType" id="deathType">TRAP</div>
          <div class="deathMsg" id="deathMsg">당신은 죽었습니다</div>
        </div>
      </div>

      <!-- 유언 입력 -->
      <div class="willInputSection">
        <div class="willInputLabel">유언을 남기세요 (선택)</div>
        <textarea id="willInput" class="willInput" placeholder="다음 플레이어에게 전할 말..." maxlength="100"></textarea>
        <div class="charCount"><span id="charCount">0</span>/100</div>
      </div>

      <div class="modalFooter">
        <button id="btnSkipWill" class="btn">건너뛰기</button>
        <button id="btnSubmitWill" class="btn primary">확인</button>
      </div>
    </div>
  </div>

  <!-- 게임 오버 화면 (24시간 밴) -->
  <div id="gameOverScreen" class="gameOverScreen hidden">
    <div class="gameOverCard">
      <div class="gameOverTitle">GAME OVER</div>
      <div class="gameOverMsg">재참가 가능 시간까지</div>
      <div class="gameOverTime" id="banCountdown">23:59:59</div>
      <button id="btnGoHome" class="btn">홈으로</button>
    </div>
  </div>

  <script src="/src/app.js" type="module"></script>
</body>
</html>
